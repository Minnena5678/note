<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</title>
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
    <div class="container">
        <h1>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h1>
        <form onsubmit="handleLogin(event)">
            <div class="form-group">
                <label for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</label>
                <input type="email" id="email" name="email" required pattern=".+@.+\..+">
            </div>
            <div class="form-group">
                <label for="password">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô :</label>
                <div class="password-wrapper">
                    <input type="password" id="password" name="password" required minlength="4" maxlength="6"
                        title="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß 4-6 ‡∏ï‡∏±‡∏ß" autocomplete="current-password">
                    <span class="toggle-password" onclick="togglePasswordVisibility()">
                        <span id="togglePasswordIcon">üëÅÔ∏è‚Äçüó®Ô∏è</span>
                        <!-- ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô -->
                    </span>
                </div>
            </div>
            <div class="route1">
                <label>‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á:</label>
            </div>
            <div class="route-selection">
                <div>
                    <input type="radio" id="public" name="route" value="public.html" required>
                    <label for="public">‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</label>
                </div>
                <div>
                    <input type="radio" id="private" name="route" value="private.html">
                    <label for="private">‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏£‡∏ñ‡∏£‡∏≤‡∏á</label>
                </div>
            </div>

            <div id="loginMessage"></div>
            <button type="submit">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
            <a href="index.html" class="button1">‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏Ñ‡∏£</a>
        </form>
    </div>

    <script>
        function handleLogin(event) {
            event.preventDefault();

            var formData = new FormData(event.target);
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "login.php", true);

            xhr.onload = function () {
                var response = xhr.responseText;
                if (xhr.status === 200) {
                    if (response.trim() === "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à") {
                        var selectedRoute = document.querySelector('input[name="route"]:checked').value;
                        window.location.href = selectedRoute;
                    } else {
                        document.getElementById("loginMessage").innerHTML = response;
                    }
                }
            };

            xhr.send(formData);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('password');
            const toggleIcon = document.getElementById('togglePasswordIcon');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.innerHTML = 'üëÅÔ∏è'; // ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
            } else {
                passwordInput.type = 'password';
                toggleIcon.innerHTML = 'üëÅÔ∏è‚Äçüó®Ô∏è'; // ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
            }
        }

    </script>
</body>

</html>