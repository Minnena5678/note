<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏£‡∏ñ‡πÑ‡∏ü</title>
    <link rel="stylesheet" href="css/private.css">
</head>

<body>
    <div class="form-container">
        <h1>‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏£‡∏ñ‡πÑ‡∏ü</h1>
        <form id="travelForm" method="post" enctype="multipart/form-data">
            <label for="travel_method">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á:</label>
            <select name="travel_method" id="travel_method">
                <option value="‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á">‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á</option>
                <option value="‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå">‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå</option>
                <option value="‡∏£‡∏ñ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞/‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å">‡∏£‡∏ñ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞/‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å</option>
                <option value="‡∏£‡∏ñ‡∏ï‡∏π‡πâ">‡∏£‡∏ñ‡∏ï‡∏π‡πâ</option>
                <option value="‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏û‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡πà‡∏ô">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏û‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡πà‡∏ô</option>
                <option value="‡∏£‡∏ñ‡πÑ‡∏ü">‡∏£‡∏ñ‡πÑ‡∏ü</option>
            </select>

            <label for="app_method">‡πÅ‡∏≠‡∏û‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡πà‡∏ô:</label>
            <select name="app_method" id="app_method">
                <option></option>
                <option value="Grab">Grab</option>
                <option value="Line Man">Line Man</option>
                <option value="Bolt">Bolt</option>
                <option value="Robinhood">Robinhood</option>
                <option value="Bonku">Bonku</option>
                <option value="Other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
            </select>

            <label for="train">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ:</label>
            <select name="train" id="train">
                <option value></option>
                <option value="‡∏Ç‡∏ö‡∏ß‡∏ô‡∏î‡πà‡∏ß‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©">‡∏Ç‡∏ö‡∏ß‡∏ô‡∏î‡πà‡∏ß‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</option>
                <option value="‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡∏î‡πà‡∏ß‡∏ô">‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡∏î‡πà‡∏ß‡∏ô</option>
                <option value="‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡πÄ‡∏£‡πá‡∏ß">‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡πÄ‡∏£‡πá‡∏ß</option>
                <option value="‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤">‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤</option>
                <option value="‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡∏ä‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á">‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡∏ä‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á</option>
                <option value="‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô">‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô</option>
                <option value="‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß">‡∏Ç‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß</option>
            </select>

            <label for="train_number">‡πÄ‡∏•‡∏Ç‡∏Ç‡∏ö‡∏ß‡∏ô:</label>
            <input type="text" name="train_number" id="train_number" pattern="^[0-9]+$" title="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç"
                placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç">

            <label for="seat_class">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á:</label>
            <input type="text" name="seat_class" id="seat_class" pattern="^[\u0E00-\u0E7F0-9\s.-]+$"
                title="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÑ‡∏ó‡∏¢" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡∏±‡πâ‡∏ô1 ‡∏£‡∏ñ‡∏ô‡∏≠‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®">
            <!-- ‡πÄ‡∏•‡∏Ç ‡∏≠‡∏¥‡πâ‡∏á ‡∏à‡∏∏‡∏î ‡∏ß‡∏£‡∏£‡∏Ñ ‡∏Ç‡∏µ‡∏î‡∏Å‡∏•‡∏≤‡∏á-->

            <label for="seat_number">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á:</label>
            <input type="text" name="seat_number" id="seat_number" pattern="^[0-9A-Za-z]+$"
                placeholder="‡πÄ‡∏ä‡πà‡∏ô 19‡∏´‡∏£‡∏∑‡∏≠13D">
            <!-- ‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡∏≠‡∏¥‡πâ‡∏á -->

            <label for="vehicle_plate">‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ:</label>
            <input type="text" name="vehicle_plate" id="vehicle_plate" pattern="^[0-9A-Za-z\u0E01-\u0E3A-]+$"
                placeholder="‡πÄ‡∏ä‡πà‡∏ô 1‡∏Å‡∏ó‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£" required>
            <!-- ‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡∏≠‡∏¥‡πâ‡∏á ‡πÑ‡∏ó‡∏¢ ‡∏ß‡∏£‡∏£‡∏Å‡∏•‡∏≤‡∏á ‡∏à‡∏∏‡∏î -->

            <label for="vehicle_color">‡∏™‡∏µ‡∏£‡∏ñ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠:</label>
            <input type="text" name="vehicle_color" id="vehicle_color" pattern="^[\u0E00-\u0E7Fa-zA-Z]+$"
                placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡∏≤‡∏ß‡∏î‡∏≥/Honda " title="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÑ‡∏ó‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©">

            <label for="pickup_dropoff">‡∏à‡∏∏‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á-‡∏à‡∏∏‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:</label>
            <input type="text" name="pickup_dropoff" id="pickup_dropoff" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û-‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å" required>

            <label for="start_time">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á:</label>
            <input type="time" name="start_time" id="start_time" required>

            <label for="baggage_images">‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏£‡∏∞:</label>
            <input type="file" name="baggage_images[]" id="baggage_images" accept="image/*">

            <label for="capture_images">‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
                (‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î):</label>
            <input type="file" name="capture_images[]" id="capture_images" accept="image/*">

            <label for="atmosphere_images">‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏£‡∏≠‡∏ö‡πÜ/‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢:</label>
            <input type="file" name="atmosphere_images[]" id="atmosphere_images" accept="image/*">

            <label for="ticket_images">‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ï‡∏±‡πã‡∏ß‡∏£‡∏ñ:</label>
            <input type="file" name="ticket_images[]" id="ticket_images" accept="image/*">

            <label for="atmosphere">‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∑‡πà‡∏ô‡πÜ:</label>
            <textarea name="atmosphere" id="atmosphere" rows="4" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞‡∏Å‡∏ß‡πà‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏Ø‡∏•‡∏Ø"></textarea>

            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="current_date"></span></p>
            <input type="hidden" name="date" id="date" value>

            <button type="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>

            <a href="login.html" class="button">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</a>
        </form>
    </div>
    <div id="popup" class="popup" style="display: none;">
        <div class="popup-content">
            <p id="popupMessage">'üéâ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ</p>
            <button id="closePopup">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var travelMethod = document.getElementById('travel_method');
            var appFields = ['app_method', 'route', 'start_time', 'baggage_images', 'capture_images', 'atmosphere'];
            var trainFields = ['train', 'train_number', 'seat_class', 'seat_number', 'start_time', 'atmosphere_images', 'baggage_images', 'ticket_images', 'atmosphere'];
            var vehicleFields = ['vehicle_plate', 'vehicle_color', 'pickup_dropoff', 'start_time', 'atmosphere_images', 'baggage_images', 'atmosphere'];

            var allFields = [
                'vehicle_plate', 'vehicle_color', 'route', 'start_time', 'atmosphere_images', 'baggage_images',
                'app_method', 'capture_images', 'train', 'train_number', 'seat_class', 'seat_number', 'ticket_images'
            ];

            function toggleFields() {
                var selectedMethod = travelMethod.value.trim();
                hideFields(allFields);

                if (selectedMethod === '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏û‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡πà‡∏ô') {
                    showFields(appFields);
                } else if (selectedMethod === '‡∏£‡∏ñ‡πÑ‡∏ü') {
                    showFields(trainFields);
                } else if (selectedMethod === '‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á' || selectedMethod === '‡∏£‡∏ñ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå' || selectedMethod === '‡∏£‡∏ñ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞/‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å' || selectedMethod === '‡∏£‡∏ñ‡∏ï‡∏π‡πâ') {
                    showFields(vehicleFields);
                }
            }

            function showFields(fields) {
                fields.forEach(function (field) {
                    var label = document.querySelector(`label[for=${field}]`);
                    var input = document.getElementById(field);
                    if (label && input) {
                        label.style.display = 'block';
                        input.style.display = 'block';
                    }
                });
            }

            function hideFields(fields) {
                fields.forEach(function (field) {
                    var label = document.querySelector(`label[for=${field}]`);
                    var input = document.getElementById(field);
                    if (label && input) {
                        label.style.display = 'none';
                        input.style.display = 'none';
                        resetFieldValue(input);
                    }
                });
            }

            function resetFieldValue(input) {
                if (input.type === 'text' || input.type === 'hidden') {
                    input.value = '';
                } else if (input.type === 'file') {
                    input.value = '';
                }
            }

            travelMethod.addEventListener('change', toggleFields);
            toggleFields();
            //‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö00:00:00 ‡πÅ‡∏•‡∏∞ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
            var now = new Date();
            var options = {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            };
            document.getElementById('current_date').textContent = now.toLocaleString('th-TH', options);
            document.getElementById('date').value = now.toISOString();


            var popup = document.getElementById('popup');
            var popupMessage = document.getElementById('popupMessage');
            var closePopup = document.getElementById('closePopup');

            //‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏û ‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏î‡∏™‡πà‡∏á
            document.getElementById('travelForm').addEventListener('submit', function (event) {
                event.preventDefault();
                var formData = new FormData(this);
                fetch('private.php', {
                    method: 'POST',
                    body: formData
                })
                    .then(response => response.json())
                    .then(data => {
                        popupMessage.innerHTML = data.message || 'üéâ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ';
                        popup.style.display = 'flex'; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô flex
                        this.reset();
                    })
                    .catch(error => {
                        popupMessage.innerHTML = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ' + error.message;
                        popup.style.display = 'flex'; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô flex
                    });
            });

            closePopup.addEventListener('click', function () {
                popup.style.display = 'none';
                window.location.href = 'login.html';
            });

            //‡πÄ‡∏ä‡πâ‡∏Ñ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
            function restrictInputByPattern(input, pattern) {
                input.addEventListener('input', function () {
                    let value = input.value;
                    let valid = value.match(pattern);
                    if (!valid) {
                        input.value = value.replace(/[^‡∏Å-‡πô0-9\s.-]/g, '');
                    }
                });
            }

            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞ input field ‡∏ó‡∏µ‡πà‡∏°‡∏µ pattern 
            restrictInputByPattern(document.getElementById('seat_class'), /^[\u0E00-\u0E7F0-9\s.-]+$/);
            restrictInputByPattern(document.getElementById('vehicle_plate'), /^[0-9A-Za-z\u0E01-\u0E3A-]+$/);
            restrictInputByPattern(document.getElementById('vehicle_color'), /^[\u0E00-\u0E7Fa-zA-Z]+$/);

            // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 
            restrictInputByPattern(document.getElementById('train_number'), /^[0-9]+$/);
            restrictInputByPattern(document.getElementById('seat_number'), /^[0-9A-Za-z]+$/);

        });
    </script>
</body>

</html>